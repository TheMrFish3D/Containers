# =============================================
# Satisfactory Dedicated Server (wolveix/satisfactory-server)
#
# Service:
# - satisfactory
# Docker Hub:
# - https://hub.docker.com/r/wolveix/satisfactory-server
# GitHub:
# - https://github.com/wolveix/satisfactory-server
#
# Volumes:
# - /tank/containers/satisfactory -> /config
# Ports:
# - 7777/udp (Game)
# - 15000/udp (Beacon)
# - 15777/udp (Query)
#
# How to use:
# 1) Adjust env vars as needed. First run will generate save files.
# 2) Start:  docker compose up -d
# 3) Stop:   docker compose down
# 4) Update: docker compose pull && docker compose up -d
# =============================================
services:
  satisfactory:
    image: wolveix/satisfactory-server:latest
    container_name: satisfactory
    restart: unless-stopped
    environment:
      - MAXPLAYERS=4
      - PGID=1000
      - PUID=1000
      - STEAMBETA=false
      - SKIPUPDATE=false
      - AUTOSAVENUM=3
      - AUTOSAVEINTERVAL=300
      - AUTOSAVEONDISCONNECT=true
      - TIMEOUT=30
      - MAXTICKRATE=30
      - TZ=Australia/Brisbane
    ports:
      - "7777:7777/udp"
      - "15000:15000/udp"
      - "15777:15777/udp"
    volumes:
      - /tank/containers/satisfactory:/config
    healthcheck:
      test: ["CMD", "bash", "/healthcheck.sh"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 120s